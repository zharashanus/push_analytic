"""
–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
"""

from typing import Dict, List, Any
from datetime import datetime


class MessageTemplates:
    """–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤"""
    
    def __init__(self):
        self.templates = {
            # üí≥ –ö–∞—Ä—Ç—ã
            'travel_card': {
                'template': "{name}, –≤ {month} —É –≤–∞—Å {trip_count} –ø–æ–µ–∑–¥–æ–∫ –Ω–∞ —Ç–∞–∫—Å–∏ –Ω–∞ {amount} ‚Ç∏. –° —Ç—Ä–µ–≤–µ–ª-–∫–∞—Ä—Ç–æ–π –≤–µ—Ä–Ω—É–ª–∏ –±—ã {cashback} ‚Ç∏ –∫–µ—à–±—ç–∫–æ–º. –•–æ—Ç–∏—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å?",
                'with_amount': "{name}, –≤ {month} —É –≤–∞—Å {trip_count} –ø–æ–µ–∑–¥–æ–∫ –Ω–∞ —Ç–∞–∫—Å–∏ –Ω–∞ {amount} ‚Ç∏. –° —Ç—Ä–µ–≤–µ–ª-–∫–∞—Ä—Ç–æ–π –≤–µ—Ä–Ω—É–ª–∏ –±—ã {cashback} ‚Ç∏ –∫–µ—à–±—ç–∫–æ–º. –•–æ—Ç–∏—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å?",
                'categories': ['—Ç–∞–∫—Å–∏', '–æ—Ç–µ–ª–∏', '–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è', '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç']
            },
            'premium_card': {
                'template': "{name}, —É –≤–∞—Å —Å—Ç–∞–±–∏–ª—å–Ω–æ –∫—Ä—É–ø–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ {balance} ‚Ç∏ –∏ —Ç—Ä–∞—Ç—ã –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö. –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–∞—Å—Ç –±–æ–ª—å—à–µ –∫–µ—à–±—ç–∫–∞ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–Ω—è—Ç–∏—è. –û—Ñ–æ—Ä–º–∏—Ç—å –∫–∞—Ä—Ç—É.",
                'with_amount': "{name}, —É –≤–∞—Å —Å—Ç–∞–±–∏–ª—å–Ω–æ –∫—Ä—É–ø–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ {balance} ‚Ç∏ –∏ —Ç—Ä–∞—Ç—ã –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö. –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–∞—Å—Ç –±–æ–ª—å—à–µ –∫–µ—à–±—ç–∫–∞ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–Ω—è—Ç–∏—è. –û—Ñ–æ—Ä–º–∏—Ç—å –∫–∞—Ä—Ç—É.",
                'categories': ['—Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã', '–ø—Ä–µ–º–∏—É–º', '–∫—Ä—É–ø–Ω—ã–µ —Ç—Ä–∞—Ç—ã']
            },
            'credit_card': {
                'template': "{name}, –≤–∞—à–∏ —Ç–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî {cat1}, {cat2}, {cat3}. –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –≤–µ—Ä–Ω—ë—Ç –¥–æ {percent}% –∏–º–µ–Ω–Ω–æ —Ç–∞–º. –û—Ñ–æ—Ä–º–∏—Ç—å –∫–∞—Ä—Ç—É.",
                'with_amount': "{name}, –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —É—à–ª–æ {amount} ‚Ç∏. –ö–∞—Ä—Ç–∞ —Å –∫–µ—à–±—ç–∫–æ–º –≤–µ—Ä–Ω—É–ª–∞ –±—ã {cashback} ‚Ç∏. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É.",
                'categories': ['–æ–Ω–ª–∞–π–Ω', '–¥–æ—Å—Ç–∞–≤–∫–∞', '—Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è']
            },
            'multi_currency_card': {
                'template': "{name}, –∑–∞–º–µ—Ç–∏–ª–∏ –≤–∞—à–∏ —á–∞—Å—Ç—ã–µ –ø–æ–∫—É–ø–∫–∏ –≤ {fx_curr}. –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—Ç—É.",
                'with_amount': "{name}, –∑–∞–º–µ—Ç–∏–ª–∏ –≤–∞—à–∏ —á–∞—Å—Ç—ã–µ –ø–æ–∫—É–ø–∫–∏ –≤ {fx_curr}. –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—Ç—É.",
                'categories': ['–≤–∞–ª—é—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏', '–æ–±–º–µ–Ω', 'usd', 'eur']
            },
            
            # üí∞ –í–∫–ª–∞–¥—ã –∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è
            'savings_deposit': {
                'template': "{name}, —É –≤–∞—Å —Å–≤–æ–±–æ–¥–Ω–æ {balance} ‚Ç∏ –Ω–∞ –∫–∞—Ä—Ç–µ. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∏—Ö –Ω–∞ –≤–∫–ª–∞–¥–µ ‚Äî —É–¥–æ–±–Ω–æ –∫–æ–ø–∏—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Ö–æ–¥. –û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥.",
                'with_amount': "{name}, —É –≤–∞—Å —Å–≤–æ–±–æ–¥–Ω–æ {balance} ‚Ç∏ –Ω–∞ –∫–∞—Ä—Ç–µ. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∏—Ö –Ω–∞ –≤–∫–ª–∞–¥–µ ‚Äî —É–¥–æ–±–Ω–æ –∫–æ–ø–∏—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Ö–æ–¥. –û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥.",
                'categories': ['—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è', '–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥', '–∑–∞—â–∏—Ç–∞']
            },
            'accumulation_deposit': {
                'template': "{name}, –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ {months} –º–µ—Å—è—Ü–∞ —É –≤–∞—Å –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç {min_balance} ‚Ç∏. –ù–∞ –≤–∫–ª–∞–¥–µ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –±—ã –Ω–∞ –≤–∞—Å. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã.",
                'with_amount': "{name}, –¥–µ–Ω—å–≥–∏ –Ω–∞ –∫–∞—Ä—Ç–µ {balance} ‚Ç∏ –Ω–µ –ø—Ä–∏–Ω–æ—Å—è—Ç –¥–æ—Ö–æ–¥–∞. –ù–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–º —Å—á—ë—Ç–µ –æ–Ω–∏ —Ä–∞—Å—Ç—É—Ç –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. –û—Ç–∫—Ä—ã—Ç—å —Å—á—ë—Ç.",
                'categories': ['—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è', '–Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è', '—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤–∑–Ω–æ—Å—ã']
            },
            'multi_currency_deposit': {
                'template': "{name}, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –æ—Ç–ø—É—Å–∫ –≤ {month}? –ù–∞ –≤–∫–ª–∞–¥–µ –º–æ–∂–Ω–æ –Ω–∞–∫–æ–ø–∏—Ç—å –±—ã—Å—Ç—Ä–µ–µ. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∫–ª–∞–¥.",
                'with_amount': "{name}, —Ö—Ä–∞–Ω–∏—Ç–µ {balance} ‚Ç∏ –Ω–∞ –∫–∞—Ä—Ç–µ. –ù–∞ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω–æ–º —Å—á—ë—Ç–µ —ç—Ç–æ –¥–∞—Å—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ —É–∂–µ —á–µ—Ä–µ–∑ {period}. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.",
                'categories': ['—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è', '–≤–∞–ª—é—Ç—ã', '–¥–µ–ø–æ–∑–∏—Ç']
            },
            
            # üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
            'investments': {
                'template': "{name}, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ —Å –Ω–∏–∑–∫–∏–º –ø–æ—Ä–æ–≥–æ–º ‚Äî –æ—Ç {amount} ‚Ç∏ –∏ –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç. –û—Ç–∫—Ä—ã—Ç—å —Å—á—ë—Ç.",
                'with_amount': "{name}, –≤—ã –Ω–∞–∫–æ–ø–∏–ª–∏ {balance} ‚Ç∏. –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –ø–æ–º–æ–≥—É—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–∏—É–º–Ω–æ–∂–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞. –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ.",
                'categories': ['–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '–Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥', '–±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π']
            },
            'investments_balance': {
                'template': "{name}, —É –≤–∞—Å —á–∞—Å—Ç–æ –æ—Å—Ç–∞—é—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–µ {balance} ‚Ç∏. –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ ‚Äî —à–∞–Ω—Å –∏—Ö —É–≤–µ–ª–∏—á–∏—Ç—å. –û—Ç–∫—Ä—ã—Ç—å —Å—á—ë—Ç.",
                'with_amount': "{name}, –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ —É –≤–∞—Å {balance} ‚Ç∏ –æ—Å—Ç–∞—Ç–æ–∫. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ ‚Äî –±–µ–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –ª–∏—à–Ω–∏—Ö —Ä–∏—Å–∫–æ–≤. –ù–∞—á–∞—Ç—å.",
                'categories': ['–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '–Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥', '–±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π']
            },
            'investments_simple': {
                'template': "{name}, —Ö–æ—Ç–∏—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤? –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ. –û—Ç–∫—Ä—ã—Ç—å —Å—á—ë—Ç.",
                'with_amount': "{name}, —Ö–æ—Ç–∏—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤? –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ. –û—Ç–∫—Ä—ã—Ç—å —Å—á—ë—Ç.",
                'categories': ['–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '–Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥', '–±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π']
            },
            
            # üåç –í–∞–ª—é—Ç–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã
            'currency_exchange': {
                'template': "{name}, –≤—ã —á–∞—Å—Ç–æ –ø–ª–∞—Ç–∏—Ç–µ –≤ {fx_curr}. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤—ã–≥–æ–¥–Ω—ã–π –æ–±–º–µ–Ω –∏ –∞–≤—Ç–æ-–ø–æ–∫—É–ø–∫–∞ –ø–æ –∫—É—Ä—Å—É {fx_rate}. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±–º–µ–Ω.",
                'with_amount': "{name}, –≤ {month} –≤—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ {amount} ‚Ç∏ –≤ {fx_curr}. –° –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–º —Å—á—ë—Ç–æ–º –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–π. –ü–æ–¥–∫–ª—é—á–∏—Ç—å.",
                'categories': ['–≤–∞–ª—é—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏', '–æ–±–º–µ–Ω', 'usd', 'eur']
            },
            'currency_travel': {
                'template': "{name}, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–µ–∑–¥–∫—É –≤ {country}? –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã –ø–æ –∫—É—Ä—Å—É {fx_rate}. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.",
                'with_amount': "{name}, —É –≤–∞—Å —á–∞—Å—Ç—ã–µ –ø–æ–∫—É–ø–∫–∏ –≤ {fx_curr}. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–æ–±–º–µ–Ω –ø–æ –∫—É—Ä—Å—É {fx_rate} ‚Äî –∏ –Ω–µ —Ç–µ—Ä—è–π—Ç–µ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è—Ö. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å.",
                'categories': ['–≤–∞–ª—é—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏', '–æ–±–º–µ–Ω', 'usd', 'eur']
            },
            'multi_currency_account': {
                'template': "{name}, —Ö—Ä–∞–Ω–∏—Ç–µ —Å–±–µ—Ä–µ–∂–µ–Ω–∏—è –≤ {main_curr}? –ú–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å —á–∞—Å—Ç—å –≤ {fx_curr} ‚Äî –ø—Ä—è–º–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –û—Ç–∫—Ä—ã—Ç—å –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–π —Å—á—ë—Ç.",
                'with_amount': "{name}, —Ö—Ä–∞–Ω–∏—Ç–µ —Å–±–µ—Ä–µ–∂–µ–Ω–∏—è –≤ {main_curr}? –ú–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å —á–∞—Å—Ç—å –≤ {fx_curr} ‚Äî –ø—Ä—è–º–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –û—Ç–∫—Ä—ã—Ç—å –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–π —Å—á—ë—Ç.",
                'categories': ['—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è', '–≤–∞–ª—é—Ç—ã', '–¥–µ–ø–æ–∑–∏—Ç']
            },
            
            # üè¶ –ö—Ä–µ–¥–∏—Ç—ã
            'cash_credit': {
                'template': "{name}, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∑–∞–ø–∞—Å –Ω–∞ –∫—Ä—É–ø–Ω—ã–µ —Ç—Ä–∞—Ç—ã ‚Äî –º–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞–ª–∏—á–Ω—ã–º–∏ –¥–æ {limit} ‚Ç∏ —Å –≤—ã–ø–ª–∞—Ç–∞–º–∏ {terms}. –£–∑–Ω–∞—Ç—å –ª–∏–º–∏—Ç.",
                'with_amount': "{name}, —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å {purchase_item}? –ö—Ä–µ–¥–∏—Ç –Ω–∞–ª–∏—á–Ω—ã–º–∏ –Ω–∞ {amount} ‚Ç∏ –ø–æ–º–æ–∂–µ—Ç —Å—Ä–∞–∑—É. –£–∑–Ω–∞—Ç—å –ª–∏–º–∏—Ç.",
                'categories': ['–∫—Ä–µ–¥–∏—Ç', '–Ω–∞–ª–∏—á–Ω—ã–µ', '–≥–∏–±–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã']
            },
            'credit_card_installment': {
                'template': "{name}, —É –≤–∞—Å —á–∞—Å—Ç–æ –ø–æ–∫—É–ø–∫–∏ –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É. –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–∞—Å—Ç {grace_period} –¥–Ω–µ–π –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç. –û—Ñ–æ—Ä–º–∏—Ç—å.",
                'with_amount': "{name}, —É –≤–∞—Å —á–∞—Å—Ç–æ –ø–æ–∫—É–ø–∫–∏ –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É. –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–∞—Å—Ç {grace_period} –¥–Ω–µ–π –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç. –û—Ñ–æ—Ä–º–∏—Ç—å.",
                'categories': ['–∫—Ä–µ–¥–∏—Ç', '–∫–∞—Ä—Ç–∞', '—Ä–∞—Å—Å—Ä–æ—á–∫–∞']
            },
            'personal_credit': {
                'template': "{name}, —É –≤–∞—Å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥ {income} ‚Ç∏. –î–æ—Å—Ç—É–ø–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫—Ä–µ–¥–∏—Ç –Ω–∞ –≤—ã–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
                'with_amount': "{name}, –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –æ—Ç–ø—É—Å–∫ –≤ {month}? –ú–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞ {amount} ‚Ç∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—ã–ø–ª–∞—Ç—ã. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–∏–º–∏—Ç.",
                'categories': ['–∫—Ä–µ–¥–∏—Ç', '–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π', '–≤—ã–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è']
            },
            
            # üéØ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
            'delivery_food': {
                'template': "{name}, –≤ {month} —Ç—Ä–∞—Ç—ã –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –µ–¥—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ {percent}%. –° –∫–∞—Ä—Ç–æ–π –≤–µ—Ä–Ω—ë—Ç—Å—è —á–∞—Å—Ç—å —Ä–∞—Å—Ö–æ–¥–æ–≤. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É.",
                'with_amount': "{name}, –≤ {month} —Ç—Ä–∞—Ç—ã –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –µ–¥—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ {percent}%. –° –∫–∞—Ä—Ç–æ–π –≤–µ—Ä–Ω—ë—Ç—Å—è —á–∞—Å—Ç—å —Ä–∞—Å—Ö–æ–¥–æ–≤. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É.",
                'categories': ['–¥–æ—Å—Ç–∞–≤–∫–∞', '–µ–¥–∞', '–∫–µ—à–±—ç–∫']
            },
            'subscriptions': {
                'template': "{name}, —É –≤–∞—Å {subscriptions_count} –ø–æ–¥–ø–∏—Å–æ–∫: {sub1}, {sub2}, {sub3}. –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –≤–µ—Ä–Ω—ë—Ç –¥–æ {percent}% –Ω–∞ –Ω–∏—Ö. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.",
                'with_amount': "{name}, —É –≤–∞—Å {subscriptions_count} –ø–æ–¥–ø–∏—Å–æ–∫: {sub1}, {sub2}, {sub3}. –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ –≤–µ—Ä–Ω—ë—Ç –¥–æ {percent}% –Ω–∞ –Ω–∏—Ö. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.",
                'categories': ['–ø–æ–¥–ø–∏—Å–∫–∏', '–æ–Ω–ª–∞–π–Ω', '–∫–µ—à–±—ç–∫']
            },
            'atm_withdrawals': {
                'template': "{name}, –≤ {month} –≤—ã —Å–Ω—è–ª–∏ {amount} ‚Ç∏ –≤ –±–∞–Ω–∫–æ–º–∞—Ç–∞—Ö. –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ.",
                'with_amount': "{name}, –≤ {month} –≤—ã —Å–Ω—è–ª–∏ {amount} ‚Ç∏ –≤ –±–∞–Ω–∫–æ–º–∞—Ç–∞—Ö. –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ.",
                'categories': ['–±–∞–Ω–∫–æ–º–∞—Ç—ã', '—Å–Ω—è—Ç–∏–µ', '–ø—Ä–µ–º–∏—É–º']
            },
            'taxi_carsharing': {
                'template': "{name}, –Ω–∞ —Ç–∞–∫—Å–∏ –∏ –∫–∞—Ä—à–µ—Ä–∏–Ω–≥ —É—à–ª–æ {amount} ‚Ç∏. –° —Ç—Ä–µ–≤–µ–ª-–∫–∞—Ä—Ç–æ–π –≤–µ—Ä–Ω—É–ª–∏—Å—å –±—ã {cashback} ‚Ç∏. –•–æ—Ç–∏—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å?",
                'with_amount': "{name}, –Ω–∞ —Ç–∞–∫—Å–∏ –∏ –∫–∞—Ä—à–µ—Ä–∏–Ω–≥ —É—à–ª–æ {amount} ‚Ç∏. –° —Ç—Ä–µ–≤–µ–ª-–∫–∞—Ä—Ç–æ–π –≤–µ—Ä–Ω—É–ª–∏—Å—å –±—ã {cashback} ‚Ç∏. –•–æ—Ç–∏—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å?",
                'categories': ['—Ç–∞–∫—Å–∏', '–∫–∞—Ä—à–µ—Ä–∏–Ω–≥', '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç']
            },
            'monthly_balance': {
                'template': "{name}, –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ —É –≤–∞—Å –æ—Å—Ç–∞—ë—Ç—Å—è {balance} ‚Ç∏ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. –ù–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–º —Å—á—ë—Ç–µ —ç—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏–ª–æ –±—ã {interest} ‚Ç∏. –û—Ç–∫—Ä—ã—Ç—å.",
                'with_amount': "{name}, –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ —É –≤–∞—Å –æ—Å—Ç–∞—ë—Ç—Å—è {balance} ‚Ç∏ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. –ù–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–º —Å—á—ë—Ç–µ —ç—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏–ª–æ –±—ã {interest} ‚Ç∏. –û—Ç–∫—Ä—ã—Ç—å.",
                'categories': ['—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è', '–Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è', '–ø—Ä–æ—Ü–µ–Ω—Ç—ã']
            }
        }
    
    def get_template(self, product_type: str, with_amount: bool = False) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è"""
        if product_type not in self.templates:
            return "–î–æ—Å—Ç—É–ø–µ–Ω –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç. –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ?"
        
        template_key = 'with_amount' if with_amount else 'template'
        return self.templates[product_type].get(template_key, self.templates[product_type]['template'])
    
    def get_categories(self, product_type: str) -> List[str]:
        """–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞"""
        return self.templates.get(product_type, {}).get('categories', [])
    
    def format_amount(self, amount: float) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É–º–º—ã –≤ —Ç–µ–Ω–≥–µ —Å–æ–≥–ª–∞—Å–Ω–æ TOV (—Ä–∞–∑—Ä—è–¥—ã ‚Äî –ø—Ä–æ–±–µ–ª—ã, –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å ‚Äî –∑–∞–ø—è—Ç–∞—è)"""
        if amount >= 1000000:
            return f"{amount/1000000:.1f} –º–ª–Ω‚Ç∏".replace('.', ',')
        elif amount >= 1000:
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ä–∞–∑—Ä—è–¥–æ–≤
            formatted = f"{amount:,.0f}".replace(',', ' ')
            return f"{formatted}‚Ç∏"
        else:
            return f"{amount:.0f}‚Ç∏"
    
    def format_date(self, date: datetime) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã"""
        months = [
            '—è–Ω–≤–∞—Ä–µ', '—Ñ–µ–≤—Ä–∞–ª–µ', '–º–∞—Ä—Ç–µ', '–∞–ø—Ä–µ–ª–µ', '–º–∞–µ', '–∏—é–Ω–µ',
            '–∏—é–ª–µ', '–∞–≤–≥—É—Å—Ç–µ', '—Å–µ–Ω—Ç—è–±—Ä–µ', '–æ–∫—Ç—è–±—Ä–µ', '–Ω–æ—è–±—Ä–µ', '–¥–µ–∫–∞–±—Ä–µ'
        ]
        return months[date.month - 1]
    
    def get_age_group(self, birth_year: int) -> str:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–æ–∑—Ä–∞—Å—Ç–Ω—É—é –≥—Ä—É–ø–ø—É"""
        current_year = datetime.now().year
        age = current_year - birth_year
        
        if age < 25:
            return 'young'
        elif age < 35:
            return 'adult'
        elif age < 50:
            return 'middle'
        else:
            return 'senior'
    
    def get_client_tone(self, age_group: str, status: str) -> Dict[str, Any]:
        """–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–Ω –æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞"""
        tones = {
            'young': {
                'formality': 'casual',
                'emoji_usage': 'moderate',
                'humor_level': 'high',
                'greeting': '–ü—Ä–∏–≤–µ—Ç'
            },
            'adult': {
                'formality': 'balanced',
                'emoji_usage': 'minimal',
                'humor_level': 'moderate',
                'greeting': '–î–æ–±—Ä—ã–π –¥–µ–Ω—å'
            },
            'middle': {
                'formality': 'formal',
                'emoji_usage': 'none',
                'humor_level': 'low',
                'greeting': '–î–æ–±—Ä—ã–π –¥–µ–Ω—å'
            },
            'senior': {
                'formality': 'very_formal',
                'emoji_usage': 'none',
                'humor_level': 'none',
                'greeting': '–î–æ–±—Ä—ã–π –¥–µ–Ω—å'
            }
        }
        
        base_tone = tones.get(age_group, tones['adult'])
        
        # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ —Å—Ç–∞—Ç—É—Å—É
        if status == 'premium':
            base_tone['formality'] = 'formal'
            base_tone['greeting'] = '–£–≤–∞–∂–∞–µ–º—ã–π'
        
        return base_tone
